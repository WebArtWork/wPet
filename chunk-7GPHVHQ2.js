import{a as h,b as f}from"./chunk-BQQUI5CC.js";import{e as Y}from"./chunk-7MKG6VHM.js";import{$ as d,A as M,Da as H,H as c,Ha as q,K as s,L as u,M as k,P as w,Qa as D,R as v,T as m,Ta as x,V as o,W as n,Wa as N,X as y,_ as P,aa as F,bb as R,da as I,eb as A,f as l,hb as B,ia as a,ja as E,ka as O,ob as L,qa as C,qb as V,ra as j,s as g,sa as T,x as S,xb as _,y as b}from"./chunk-3B44IZU7.js";var z=(()=>{class r{constructor(e,i,t,p,K){this._translate=e,this._petrecordService=i,this._alert=t,this._form=p,this._core=K,this.load=new M,this.form=this._form.getForm("petrecord",h)}update(e){this._form.modal(this.form,[],e).then(i=>{this._core.copy(i,e),this._petrecordService.update(e);let t=this._petrecordService.doc(e._id);this._core.copy(i,t)})}delete(e){this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this petrecord?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>l(this,null,function*(){this._petrecordService.delete(e).subscribe(()=>{this.load.emit()})})}]})}static{this.\u0275fac=function(i){return new(i||r)(s(L),s(f),s(B),s(_),s(R))}}static{this.\u0275cmp=u({type:r,selectors:[["app-history"]],inputs:{record:"record"},outputs:{load:"load"},standalone:!1,decls:11,vars:9,consts:[[3,"routerLink"],[1,"documents__title"],[1,"documents__description"],[1,"material-icons",3,"click"]],template:function(i,t){i&1&&(o(0,"a",0)(1,"div",1),a(2),n(),o(3,"div",2),a(4),C(5,"mongodate"),C(6,"date"),n()(),o(7,"span",3),d("click",function(){return t.update(t.record)}),a(8,"edit"),n(),o(9,"span",3),d("click",function(){return t.delete(t.record)}),a(10,"delete"),n()),i&2&&(I("routerLink","/pethistorypage/",t.record._id,""),c(2),E(t.record.name),c(2),O(" ",T(6,6,j(5,4,t.record._id),"d MMMM y")," "))},dependencies:[x,q,A],encapsulation:2})}}return r})();function ee(r,J){if(r&1){let e=P();o(0,"div",14)(1,"app-history",15),d("load",function(){S(e);let t=F();return b(t.load())}),n()()}if(r&2){let e=J.$implicit;c(),v("record",e)}}var G=(()=>{class r{constructor(e,i,t){this._petrecordService=e,this._route=i,this._form=t,this.records=[],this.isMenuOpen=!1,this.pet_id="",this.form=this._form.getForm("petrecord",h),this._route.paramMap.subscribe(p=>{this.pet_id=p.get("pet_id")||"",this.load()})}create(){this._form.modal(this.form,{label:"Create",click:(e,i)=>l(this,null,function*(){i(),this._preCreate(e),this._petrecordService.create(e).subscribe(()=>{this.load()})})})}load(){this._petrecordService.get({page:1,query:this._query()}).subscribe(e=>{this.records.splice(0,this.records.length),this.records.push(...e)})}_query(){let e="";return this.pet_id&&(e+=(e?"&":"")+"pet="+this.pet_id),e}_preCreate(e){delete e.__created,this.pet_id&&(e.pet=this.pet_id)}static{this.\u0275fac=function(i){return new(i||r)(s(f),s(D),s(_))}}static{this.\u0275cmp=u({type:r,selectors:[["ng-component"]],standalone:!1,decls:17,vars:9,consts:[[1,"documents-wrapper"],[1,"documents-container"],[1,"documents-list"],[1,"burger-wrap",3,"click"],[1,"burger"],[1,"documents-sidebar"],[1,"documents-sidebar-content"],[1,"documents-sidebar__img"],["src","assets/default.png","alt",""],[1,"documents-sidebar__title"],[3,"click"],[1,"documents-main"],[1,"documents-main-content"],["class","documents-main-row",4,"ngFor","ngForOf"],[1,"documents-main-row"],[3,"load","record"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),d("click",function(){return t.isMenuOpen=!t.isMenuOpen}),y(4,"div",4),n(),o(5,"div",5)(6,"div",6)(7,"div",7),y(8,"img",8),n(),o(9,"div",9),a(10,"Records"),n(),o(11,"div")(12,"wbutton",10),d("click",function(){return t.create()}),a(13,"Create"),n()()()(),o(14,"div",11)(15,"div",12),w(16,ee,2,1,"div",13),n()()()()()),i&2&&(m("documents-wrapper--open",t.isMenuOpen),c(3),m("burger-wrap--open",t.isMenuOpen),c(),m("burger--close",t.isMenuOpen),c(),m("documents-sidebar--open",t.isMenuOpen),c(11),v("ngForOf",t.records))},dependencies:[H,V,z],encapsulation:2})}}return r})();var te=[{path:":pet_id",component:G}],Ce=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=k({type:r})}static{this.\u0275inj=g({imports:[N.forChild(te),Y]})}}return r})();export{Ce as PethistoryModule};
