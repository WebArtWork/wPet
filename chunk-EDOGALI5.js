import{a as P}from"./chunk-OOXVTHAE.js";import{a as L}from"./chunk-Y3STHWDL.js";import{a as F}from"./chunk-6MVJN4GZ.js";import{a as T}from"./chunk-W223VQEW.js";import{a as M}from"./chunk-XO6GTODC.js";import{a as j}from"./chunk-TNS4AMU7.js";import{e as I}from"./chunk-7MKG6VHM.js";import{K as n,L as u,M as f,R as v,Wa as S,X as _,bb as g,f as m,hb as k,i as c,ib as b,ob as C,r as h,s as d,vb as w,xb as y}from"./chunk-3B44IZU7.js";var l={formId:"petlink",title:"Petlink",components:[{name:"Select",key:"type",focused:!0,hidden:!0,fields:[{name:"Placeholder",value:"Choose clinic or store"},{name:"Label",value:"Title"},{name:"Items",value:["Clinic","Store"]}]},{name:"Select",key:"clinic",hidden:!1,fields:[{name:"Placeholder",value:"Choose clinic"},{name:"Label",value:"Title"},{name:"Items",value:[]}]},{name:"Select",key:"store",hidden:!1,fields:[{name:"Placeholder",value:"Choose store"},{name:"Label",value:"Title"},{name:"Items",value:[]}]},{name:"Select",key:"place",hidden:!1,fields:[{name:"Placeholder",value:"Choose place"},{name:"Label",value:"Title"},{name:"Items",value:[]}]},{name:"Select",key:"drug",hidden:!1,fields:[{name:"Placeholder",value:"Choose drug"},{name:"Label",value:"Title"},{name:"Items",value:[]}]},{name:"Select",key:"food",hidden:!1,fields:[{name:"Placeholder",value:"Choose food"},{name:"Label",value:"Title"},{name:"Items",value:[]}]},{name:"Select",key:"item",hidden:!1,fields:[{name:"Placeholder",value:"Choose item"},{name:"Label",value:"Title"},{name:"Items",value:[]}]}]};var x=(()=>{class o extends b{constructor(){super({name:"petlink"}),this.petlinks=this.getDocs()}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var D=(()=>{class o{constructor(r,i,s,a,p,N,A,q,B,V,W){this._translate=r,this._petlinkService=i,this._alert=s,this._form=a,this._core=p,this._petclinicService=N,this._petstoreService=A,this._petplaceService=q,this._petdrugService=B,this._petfoodService=V,this._petitemService=W,this.columns=["clinic","store","place","drug","food","item"],this.form=this._form.getForm("petlink",l),this.config={paginate:this.setRows.bind(this),perPage:20,setPerPage:this._petlinkService.setPerPage.bind(this._petlinkService),allDocs:!1,create:()=>{let t={};this._form.modal(this.form,{label:"Create",click:(e,Y)=>m(this,null,function*(){Y(),this._preCreate(e),yield c(this._petlinkService.create(e)),this.setRows()})},t,e=>{})},update:t=>{this._form.modal(this.form,[],t).then(e=>{this._core.copy(e,t),this._petlinkService.update(t)})},delete:t=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this petlink?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>m(this,null,function*(){yield c(this._petlinkService.delete(t)),this.setRows()})}]})},headerButtons:[{icon:"playlist_add",click:this._bulkManagement(),class:"playlist"},{icon:"edit_note",click:this._bulkManagement(!1),class:"edit"}]},this.rows=[],this._page=1,this._petclinicService.get().subscribe(t=>{let e=l.components[1].fields[2].value;e.splice(0,e.length),e.push(...t)}),this._petstoreService.get().subscribe(t=>{let e=l.components[2].fields[2].value;e.splice(0,e.length),e.push(...t)}),this._petplaceService.get().subscribe(t=>{let e=l.components[3].fields[2].value;e.splice(0,e.length),e.push(...t)}),this._petdrugService.get().subscribe(t=>{let e=l.components[4].fields[2].value;e.splice(0,e.length),e.push(...t)}),this._petfoodService.get().subscribe(t=>{let e=l.components[5].fields[2].value;e.splice(0,e.length),e.push(...t)}),this._petitemService.get().subscribe(t=>{let e=l.components[6].fields[2].value;e.splice(0,e.length),e.push(...t)}),this.setRows()}setRows(r=this._page){this._page=r,this._core.afterWhile(this,()=>{this._petlinkService.get({page:r}).subscribe(i=>{this.rows.splice(0,this.rows.length),this.rows.push(...i)})},250)}_bulkManagement(r=!0){return()=>{this._form.modalDocs(r?[]:this.rows).then(i=>m(this,null,function*(){if(r)for(let s of i)this._preCreate(s),yield c(this._petlinkService.create(s));else{for(let s of this.rows)i.find(a=>a._id===s._id)||(yield c(this._petlinkService.delete(s)));for(let s of i){let a=this.rows.find(p=>p._id===s._id);a?(this._core.copy(s,a),yield c(this._petlinkService.update(a))):(this._preCreate(s),yield c(this._petlinkService.create(s)))}}this.setRows()}))}}_preCreate(r){delete r.__created}static{this.\u0275fac=function(i){return new(i||o)(n(C),n(x),n(k),n(y),n(g),n(P),n(j),n(L),n(M),n(T),n(F))}}static{this.\u0275cmp=u({type:o,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","Links",3,"columns","config","rows"]],template:function(i,s){i&1&&_(0,"wtable",0),i&2&&v("columns",s.columns)("config",s.config)("rows",s.rows)},dependencies:[w],encapsulation:2})}}return o})();var E=[{path:"",component:D}],ce=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=f({type:o})}static{this.\u0275inj=d({imports:[S.forChild(E),I]})}}return o})();export{ce as LinksModule};
