import{a as C}from"./chunk-OOXVTHAE.js";import{a as S,b as g}from"./chunk-N6KVFGXY.js";import{e as G}from"./chunk-7MKG6VHM.js";import{$ as a,A as f,Da as L,Db as Y,Eb as $,H as s,K as c,L as u,M as F,P as O,R as d,T as _,Ta as N,V as n,W as r,Wa as U,X as T,_ as D,aa as j,bb as V,da as q,f as h,hb as A,ia as m,ja as b,ob as R,qb as z,s as M,sb as B,w as k,x as E,xb as v,y as I}from"./chunk-3B44IZU7.js";var w=(()=>{class o{get items(){return this._petclinicService.petclinics}constructor(e){this._petclinicService=e,this.wChange=new f}ngOnChanges(e){e.value&&!e.value.firstChange&&(this.value=e.value.currentValue)}static{this.\u0275fac=function(i){return new(i||o)(c(C))}}static{this.\u0275cmp=u({type:o,selectors:[["petclinic-selector"]],inputs:{value:"value"},outputs:{wChange:"wChange"},features:[k],decls:1,vars:3,consts:[["placeholder","Select petclinic",3,"modelChange","select","items","clearable"]],template:function(i,t){i&1&&(n(0,"wselect",0),a("modelChange",function(p){return t.wChange.emit(p)}),r()),i&2&&d("select",t.value)("items",t.items)("clearable",!0)},dependencies:[$,Y],encapsulation:2})}}return o})();var H=(()=>{class o{constructor(e,i,t,l,p){this._translate=e,this._petdoctorService=i,this._alert=t,this._form=l,this._core=p,this.load=new f,this.form=this._form.getForm("petdoctor",S)}update(e){this._form.modal(this.form,[],e).then(i=>{this._core.copy(i,e),this._petdoctorService.update(e);let t=this._petdoctorService.doc(e._id);this._core.copy(i,t)})}delete(e){this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this petrecord?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>h(this,null,function*(){this._petdoctorService.delete(e).subscribe(()=>{this.load.emit()})})}]})}static{this.\u0275fac=function(i){return new(i||o)(c(R),c(g),c(A),c(v),c(V))}}static{this.\u0275cmp=u({type:o,selectors:[["app-doctor"]],inputs:{doctor:"doctor"},outputs:{load:"load"},standalone:!1,decls:9,vars:4,consts:[[3,"routerLink"],[1,"documents__title"],[1,"documents__description"],[1,"material-icons",3,"click"]],template:function(i,t){i&1&&(n(0,"a",0)(1,"div",1),m(2),r(),n(3,"div",2),m(4),r()(),n(5,"span",3),a("click",function(){return t.update(t.doctor)}),m(6,"edit"),r(),n(7,"span",3),a("click",function(){return t.delete(t.doctor)}),m(8,"delete"),r()),i&2&&(q("routerLink","/petdoctorpage/",t.doctor._id,""),s(2),b(t.doctor.name),s(2),b(t.doctor.specialization))},dependencies:[N],encapsulation:2})}}return o})();function x(o,J){if(o&1){let e=D();n(0,"div",14)(1,"app-doctor",15),a("load",function(){E(e);let t=j();return I(t.load())}),r()()}if(o&2){let e=J.$implicit;s(),d("doctor",e)}}var P=(()=>{class o{constructor(e,i,t){this._petdoctorService=e,this._form=i,this._petclinicService=t,this.doctors=[],this.clinics=[],this.isMenuOpen=!1,this.clinic_id="",this.search="",this.form=this._form.getForm("petdoctor",S),this.load(),this.selectorsLoad()}setSearch(e){this.search=e||""}create(){this._form.modal(this.form,{label:"Create",click:(e,i)=>h(this,null,function*(){i(),this._preCreate(e),this._petdoctorService.create(e).subscribe(()=>{this.load()})})})}load(){this._petdoctorService.get({query:this._query()},{name:"public"}).subscribe(e=>{this.doctors.splice(0,this.doctors.length),this.doctors.push(...e)})}selectorsLoad(){this._petclinicService.get({},{name:"public"}).subscribe(e=>{this.clinics.splice(0,this.clinics.length),this.clinics.push(...e)})}_preCreate(e){delete e.__created}_query(){let e="";return this.clinic_id&&(e+=(e?"&":"")+"clinic="+this.clinic_id),this.search&&(e+=(e?"&":"")+"search="+this.search),e}static{this.\u0275fac=function(i){return new(i||o)(c(g),c(v),c(C))}}static{this.\u0275cmp=u({type:o,selectors:[["ng-component"]],standalone:!1,decls:18,vars:12,consts:[[1,"documents-wrapper"],[1,"documents-container"],[1,"documents-list"],[1,"burger-wrap",3,"click"],[1,"burger"],[1,"documents-sidebar"],[1,"documents-sidebar-content"],[1,"documents-sidebar__title"],[3,"click"],[3,"wChange","value"],[3,"wChange","wSubmit","type","clearable"],[1,"documents-main"],[1,"documents-main-content"],["class","documents-main-row",4,"ngFor","ngForOf"],[1,"documents-main-row"],[3,"load","doctor"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),a("click",function(){return t.isMenuOpen=!t.isMenuOpen}),T(4,"div",4),r(),n(5,"div",5)(6,"div",6)(7,"div",7),m(8,"Pet Doctors"),r(),n(9,"div")(10,"wbutton",8),a("click",function(){return t.create()}),m(11,"Create"),r()(),n(12,"div")(13,"petclinic-selector",9),a("wChange",function(p){return t.clinic_id=p,t.load()}),r(),n(14,"winput",10),a("wChange",function(p){return t.setSearch(p)})("wSubmit",function(){return t.load()}),r()()()(),n(15,"div",11)(16,"div",12),O(17,x,2,1,"div",13),r()()()()()),i&2&&(_("documents-wrapper--open",t.isMenuOpen),s(3),_("burger-wrap--open",t.isMenuOpen),s(),_("burger--close",t.isMenuOpen),s(),_("documents-sidebar--open",t.isMenuOpen),s(8),d("value",t.clinic_id),s(),d("type","search")("clearable",!0),s(3),d("ngForOf",t.doctors))},dependencies:[L,z,B,w,H],encapsulation:2})}}return o})();var ee=[{path:"",component:P},{path:":clinic_id",component:P}],Ie=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=F({type:o})}static{this.\u0275inj=M({imports:[U.forChild(ee),G,w]})}}return o})();export{Ie as PetdoctorsModule};
