import{a as w}from"./chunk-ZK6FNFBF.js";import{a as b}from"./chunk-MTF54CAV.js";import{a as v}from"./chunk-22QWSCIE.js";import{e as y}from"./chunk-7MKG6VHM.js";import{K as n,L as m,M as p,R as d,Wa as h,X as f,bb as u,hb as _,ob as C,s as l,vb as g,xb as S}from"./chunk-3B44IZU7.js";var M=(()=>{class o{get rows(){return this._petService.petsByAuthor[this._userService.user._id]}constructor(r,i,e,s,c,j){this._translate=r,this._petService=i,this._alert=e,this._form=s,this._core=c,this._userService=j,this.columns=["name","species","breed","age","gender","adoptable","description"],this.form=this._form.getForm("pet",w),this.config={create:()=>{this._form.modal(this.form,{label:"Create",click:(t,a)=>{this._preCreate(t),this._petService.create(t),a()}})},update:t=>{this._form.modal(this.form,[],t).then(a=>{this._core.copy(a,t),this._petService.update(t)})},delete:t=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this pet?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._petService.delete(t)}}]})},buttons:[{icon:"article",hrefFunc:t=>"/records/"+t._id},{icon:"report_problem",hrefFunc:t=>"/allergies/"+t._id},{icon:"cloud_download",click:t=>{this._form.modalUnique("pet","url",t)}}],headerButtons:[{icon:"playlist_add",click:this._bulkManagement(),class:"playlist"},{icon:"edit_note",click:this._bulkManagement(!1),class:"edit"}]}}_bulkManagement(r=!0){return()=>{this._form.modalDocs(r?[]:this.rows).then(i=>{if(r)for(let e of i)this._preCreate(e),this._petService.create(e);else{for(let e of this.rows)i.find(s=>s._id===e._id)||this._petService.delete(e);for(let e of i){let s=this.rows.find(c=>c._id===e._id);s?(this._core.copy(e,s),this._petService.update(s)):(this._preCreate(e),this._petService.create(e))}}})}}_preCreate(r){delete r.__created}static{this.\u0275fac=function(i){return new(i||o)(n(C),n(b),n(_),n(S),n(u),n(v))}}static{this.\u0275cmp=m({type:o,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","Pets",3,"columns","config","rows"]],template:function(i,e){i&1&&f(0,"wtable",0),i&2&&d("columns",e.columns)("config",e.config)("rows",e.rows)},dependencies:[g],encapsulation:2})}}return o})();var F=[{path:"",component:M}],Y=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=p({type:o})}static{this.\u0275inj=l({imports:[h.forChild(F),y]})}}return o})();export{Y as PetsModule};
