import{a as C}from"./chunk-XWTNKRNA.js";import{a as b,b as P}from"./chunk-DRFXSKO4.js";import{a as S}from"./chunk-DRSBBOQG.js";import{a as g}from"./chunk-Y3STHWDL.js";import{a as J}from"./chunk-6MVJN4GZ.js";import{a as H}from"./chunk-W223VQEW.js";import{a as G}from"./chunk-XO6GTODC.js";import{e as z}from"./chunk-7MKG6VHM.js";import{$ as c,A as E,Da as N,H as s,K as p,L as f,M as T,P as D,R as d,T as _,Ta as L,V as n,W as r,Wa as V,X as F,_ as j,aa as O,bb as A,da as q,f as y,hb as R,ia as m,ja as w,ob as B,qb as Y,s as k,sb as $,x as I,xb as v,y as M}from"./chunk-3B44IZU7.js";var Q=(()=>{class o{constructor(e,i,t,a,l){this._petplaceService=e,this._form=i,this._core=t,this._alert=a,this._translate=l,this.load=new E,this.form=this._form.getForm("petplace",C)}update(e){this._form.modal(this.form,[],e).then(i=>{this._core.copy(i,e),this._petplaceService.update(e);let t=this._petplaceService.doc(e._id);this._core.copy(i,t)})}delete(e){this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this pet?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._petplaceService.delete(e).subscribe(()=>{this.load.emit()})}}]})}static{this.\u0275fac=function(i){return new(i||o)(p(g),p(v),p(A),p(R),p(B))}}static{this.\u0275cmp=f({type:o,selectors:[["app-places"]],inputs:{places:"places"},outputs:{load:"load"},standalone:!1,decls:9,vars:4,consts:[[3,"routerLink"],[1,"documents__title"],[1,"documents__description"],[1,"material-icons",3,"click"]],template:function(i,t){i&1&&(n(0,"a",0)(1,"div",1),m(2),r(),n(3,"div",2),m(4),r()(),n(5,"span",3),c("click",function(){return t.update(t.places)}),m(6,"edit"),r(),n(7,"span",3),c("click",function(){return t.delete(t.places)}),m(8,"delete"),r()),i&2&&(q("routerLink","/petstorepage/",t.places._id,""),s(2),w(t.places.name),s(2),w(t.places.description))},dependencies:[L],encapsulation:2})}}return o})();function x(o,U){if(o&1){let e=j();n(0,"div",14)(1,"app-places",15),c("load",function(){I(e);let t=O();return M(t.load())}),r()()}if(o&2){let e=U.$implicit;s(),d("places",e)}}var h=(()=>{class o{constructor(e,i,t,a,l){this._petplaceService=e,this._form=i,this._petdrugService=t,this._petfoodService=a,this._petitemService=l,this.places=[],this.drugs=[],this.food=[],this.items=[],this.isMenuOpen=!1,this.drugDisabled=!1,this.foodDisabled=!1,this.itemDisabled=!1,this.place_drug="",this.place_food="",this.place_item="",this.search="",this.form=this._form.getForm("petplace",C),this.load(),this._petdrugService.get().subscribe(u=>{this.drugs.splice(0,this.drugs.length),this.drugs.push(...u)}),this._petfoodService.get().subscribe(u=>{this.food.splice(0,this.food.length),this.food.push(...u)}),this._petitemService.get().subscribe(u=>{this.items.splice(0,this.items.length),this.items.push(...u)})}setSearch(e){this.search=e||""}create(){this._form.modal(this.form,{label:"Create",click:(e,i)=>y(this,null,function*(){i(),this._preCreate(e),this._petplaceService.create(e).subscribe(()=>{this.load()})})})}load(){this._petplaceService.get({query:this._query()},{name:"public"}).subscribe(e=>{this.places.splice(0,this.places.length),this.places.push(...e)}),this.drugDisabled=!!(this.place_food||this.place_item||this.place_food&&this.place_item),this.foodDisabled=!!this.place_drug,this.itemDisabled=!!this.place_drug}_preCreate(e){delete e.__created}_query(){let e="";return this.place_drug&&(e+=(e?"&":"")+"place_drug="+this.place_drug),this.place_food&&(e+=(e?"&":"")+"place_food="+this.place_food),this.place_item&&(e+=(e?"&":"")+"place_item="+this.place_item),this.search&&(e+=(e?"&":"")+"search="+this.search),e}static{this.\u0275fac=function(i){return new(i||o)(p(g),p(v),p(G),p(H),p(J))}}static{this.\u0275cmp=f({type:o,selectors:[["ng-component"]],standalone:!1,decls:20,vars:17,consts:[[1,"documents-wrapper"],[1,"documents-container"],[1,"documents-list"],[1,"burger-wrap",3,"click"],[1,"burger"],[1,"documents-sidebar"],[1,"documents-sidebar-content"],[1,"documents-sidebar__title"],[3,"click"],[3,"wChange","value","disabled"],[3,"wChange","wSubmit","type","clearable"],[1,"documents-main"],[1,"documents-main-content"],["class","documents-main-row",4,"ngFor","ngForOf"],[1,"documents-main-row"],[3,"load","places"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c("click",function(){return t.isMenuOpen=!t.isMenuOpen}),F(4,"div",4),r(),n(5,"div",5)(6,"div",6)(7,"div",7),m(8,"Places"),r(),n(9,"div")(10,"wbutton",8),c("click",function(){return t.create()}),m(11,"Create"),r()(),n(12,"div")(13,"petdrug-selector",9),c("wChange",function(l){return t.place_drug=l,t.load()}),r(),n(14,"petfood-selector",9),c("wChange",function(l){return t.place_food=l,t.load()}),r(),n(15,"petitem-selector",9),c("wChange",function(l){return t.place_item=l,t.load()}),r(),n(16,"winput",10),c("wChange",function(l){return t.setSearch(l)})("wSubmit",function(){return t.load()}),r()()()(),n(17,"div",11)(18,"div",12),D(19,x,2,1,"div",13),r()()()()()),i&2&&(_("documents-wrapper--open",t.isMenuOpen),s(3),_("burger-wrap--open",t.isMenuOpen),s(),_("burger--close",t.isMenuOpen),s(),_("documents-sidebar--open",t.isMenuOpen),s(8),d("value",t.place_drug)("disabled",t.drugDisabled),s(),d("value",t.place_food)("disabled",t.foodDisabled),s(),d("value",t.place_item)("disabled",t.itemDisabled),s(),d("type","search")("clearable",!0),s(3),d("ngForOf",t.places))},dependencies:[N,Y,$,S,b,P,Q],encapsulation:2})}}return o})();var ee=[{path:"",component:h},{path:":place_drug",component:h},{path:":place_food",component:h},{path:":place_item",component:h}],Te=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=T({type:o})}static{this.\u0275inj=k({imports:[V.forChild(ee),z,S,b,P]})}}return o})();export{Te as PetplacesModule};
